{% extends "prive/base_list.html" %}
{% load crispy_forms_tags %}
{% block titre_page %}Utilisateurs{% endblock %}

{% block entete_icone %}<i class="fas fa-users"></i>{% endblock %}

{% block entete_objets_a_lister %}utilisateurs{% endblock %}

{% block entete_boutons_droites %}
    <a class="btn btn-sm btn-light text-primary" href="{% url 'register' %}">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left me-1"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
        Nouvel utilisateur
    </a>
{% endblock %}

{% block tableau %}
<table id="example" class="table">
    <thead>
        <tr>
            <th>user</th>
            <th>email</th>
            <th>Groupes</th>
            <th>Dern. Connexion</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for p in object_list %}
        <tr>
            <td>
                <div class="d-flex align-items-center">
                    <div class="avatar me-2">
                        <img class="avatar-img img-fluid" src="{{ p.image.url }}">
                    </div>
                    {{ p.user.username}}
              </div>
            </td>
            <td>{{ p.user.email }}</td>
            <td>{% for groupe in p.user.groups.all %}<span class="badge bg-primary-soft text-primary"><a href="{% url 'group-details' pk=groupe.pk %}">{{ groupe }}</a></span> {% endfor %}</td>
            <td>{{ p.user.last_login|date }}</td>
            <td>
                <a class="btn btn-datatable btn-icon btn-transparent-dark me-2" href="mailto:{{ p.user.email }}"><i class="far fa-envelope text-green"></i></a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}